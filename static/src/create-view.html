<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/polymer/lib/mixins/gesture-event-listeners.html">

<link rel="import" href="mixins/gomp-core-mixin.html">

<link rel="import" href="components/recipe-edit.html">

<link rel="import" href="shared-styles.html">

<dom-module id="create-view">
    <template>
        <style include="shared-styles">
            :host {
                display: block;
                color: var(--primary-text-color);
            }
            article {
                padding: 8px;
            }
        </style>

        <article>
            <h4>New Recipe</h4>
            <recipe-edit
                jwt-token="[[jwtToken]]"
                is-active="[[isActive]]"
                on-recipe-edit-cancel="_editCanceled"
                on-recipe-edit-save="_editSaved"></recipe-edit>
        </article>
    </template>

    <script>
        class CreateView extends GompCoreMixin(Polymer.GestureEventListeners(Polymer.Element)) {
            static get is() { return 'create-view'; }

            _editCanceled(e) {
                this.dispatchEvent(new CustomEvent('change-page', {bubbles: true, composed: true, detail: {url: '/search'}}));
            }
            _editSaved(e) {
                this.dispatchEvent(new CustomEvent('change-page', {bubbles: true, composed: true, detail: {url: e.detail.redirectUrl}}));
            }
        }

        window.customElements.define(CreateView.is, CreateView);
    </script>
</dom-module>
