<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="behaviors/gomp-core-behavior.html">

<link rel="import" href="components/recipe-edit.html">

<link rel="import" href="shared-styles.html">

<dom-module id="create-view">
    <template>
        <style include="shared-styles">
            :host {
                display: block;
                color: var(--primary-text-color);
            }
            article {
                padding: 8px;
            }
        </style>

        <article>
            <h3>New Recipe</h3>
            <recipe-edit id="recipeEdit" jwt-token="[[jwtToken]]" is-active="[[isActive]]"></recipe-edit>
        </article>
    </template>

    <script>
        Polymer({

            is: 'create-view',
            behaviors: [
                GompCoreBehavior,
            ],

            ready: function() {
                this.$.recipeEdit.addEventListener('recipe-edit-cancel', e => this._editCanceled(e));
                this.$.recipeEdit.addEventListener('recipe-edit-save', e => this._editSaved(e));
            },

            _editCanceled: function(e) {
                this.fire('change-page', '/search');
            },
            _editSaved: function(e) {
                this.fire('change-page', e.detail.redirectUrl);
            },

        });
    </script>
</dom-module>
