{{ define "css-recipe/list" }}
<style>
    .rating-container {
        position: absolute;
        top: 5px;
        right: 5px;
    }
    
    .rating-container > i {
        color: #dddddd;
        float: right;
    }
    
    .rating-container > i.whole {
        -webkit-clip-path: inset(0 0 0 50%);
                clip-path: inset(0 0 0 50%);
        margin-left: -10%;
    }
    
    .rating-container > i.half {
        -webkit-clip-path: inset(0 50% 0 0);
                clip-path: inset(0 50% 0 0);
    }
    
    .rating-container > i.active,
    .rating-container > i.active ~ i {
        color: #fdd835;
    }
</style>
{{ end }}

{{ define "content-recipe/list" }}
<section class="row">
    {{if .SearchQuery}}
    <p class="col s12 l12">
        <span class="toast rounded">
            Search: {{.SearchQuery}}, Results: {{.ResultCount}}
            <i class="material-icons right clickable" onclick="location.href='?clear=true';">clear_all</i>
        </span>
    </p>
    {{end}}
    {{range .Recipes}}
    <div class="col s12 m6 l4">
        <article class="card small grey lighten-4 hoverable clickable" onclick="location.href = '{{RootUrlPath}}/recipes/{{.ID}}';">
            {{if .Image}}
            <section class="card-image">
                <img src="{{RootUrlPath}}{{.Image}}" class="darken-25">
            </section>
            {{end}}
            <section class="rating-container">
                <i class="material-icons whole {{if eq .AvgRating 5.0}}active{{end}}">star</i>
                <i class="material-icons half {{if eq .AvgRating 4.5}}active{{end}}">star</i>
                <i class="material-icons whole {{if eq .AvgRating 4.0}}active{{end}}">star</i>
                <i class="material-icons half {{if eq .AvgRating 3.5}}active{{end}}">star</i>
                <i class="material-icons whole {{if eq .AvgRating 3.0}}active{{end}}">star</i>
                <i class="material-icons half {{if eq .AvgRating 2.5}}active{{end}}">star</i>
                <i class="material-icons whole {{if eq .AvgRating 2.0}}active{{end}}">star</i>
                <i class="material-icons half {{if eq .AvgRating 1.5}}active{{end}}">star</i>
                <i class="material-icons whole {{if eq .AvgRating 1.0}}active{{end}}">star</i>
                <i class="material-icons half {{if eq .AvgRating 0.5}}active{{end}}">star</i>
            </section>
            <section class="card-content">
                <span class="card-title">{{.Name}}</span>
            </section>
        </article>
    </div>
    {{end}}
    
    {{$baseLink := .PerPage | printf "?q=%s&count=%d&page=" .Query}}
    <ul class="pagination col s12 l12 center">
        <li class="{{if le .PageNum 1}}disabled{{end}}">
            <a href="{{if gt .PageNum 1}}{{$baseLink}}1{{else}}#{{end}}"><i class="material-icons">first_page</i></a>
        </li>
        <li class="{{if le .PageNum 1}}disabled{{end}}">
            <a href="{{if gt .PageNum 1}}{{$baseLink}}{{Add .PageNum -1}}{{else}}#{{end}}"><i class="material-icons">chevron_left</i></a>
        </li>
        {{range  Paginate .PageNum .NumPages 5}}
        <li {{if eq $.PageNum .}}class="active"{{end}}>
            <a href="{{$baseLink}}{{.}}">{{.}}</a>
        </li>
        {{end}}
        <li class="{{if ge .PageNum .NumPages}}disabled{{end}}">
            <a href="{{if lt .PageNum .NumPages}}{{$baseLink}}{{Add .PageNum 1}}{{else}}#{{end}}"><i class="material-icons">chevron_right</i></a>
        </li>
        <li class="{{if ge .PageNum .NumPages}}disabled{{end}}">
            <a href="{{if lt .PageNum .NumPages}}{{$baseLink}}{{.NumPages}}{{else}}#{{end}}"><i class="material-icons">last_page</i></a>
        </li>
    </ul>
</section>
<section class="fixed-action-btn">
    <a href="{{RootUrlPath}}/recipes/create" class="btn-floating btn-large waves-effect green">
        <i class="material-icons">add</i>
    </a>
</section>
{{ end }}
