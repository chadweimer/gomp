{{ define "css-recipe/list" }}
<style>    
    .collection-item {
        height: 84px;
    }
    
    .collection-title {
        font-size: 24px;
        font-weight: 300;
    }
</style>
{{ end }}

{{ define "content-recipe/list" }}
<section class="row">
    <div class="col s12 l12">
        <div class="section">
            {{if .SearchQuery}}
            <span class="chip left">
                Search: {{.SearchQuery}}, Results: {{.ResultCount}}
                <i class="material-icons right clickable" onclick="location.href='?clear=true';">clear_all</i>
            </span>
            {{end}}
            <a id="full-view-button" href="javascript:void(0)" class="black-text"><i class="material-icons right">view_agenda</i></a>
            <a id="compact-view-button" href="javascript:void(0)" class="grey-text"><i class="material-icons right">view_headline</i></a>
        </div>
    </div>
    <div id="full-view">
        {{range .Recipes}}
        <div class="col s12 m6 l4">
            <article class="card small grey lighten-4 hoverable clickable" onclick="location.href = '{{RootUrlPath}}/recipes/{{.ID}}';">
                {{if .Image}}
                <section class="card-image">
                    <img src="{{RootUrlPath}}{{.Image}}" class="darken-25">
                </section>
                {{end}}
                <section class="rating-container">
                <i class="material-icons whole {{if eq .AvgRating 5.0}}active{{end}}">star</i>
                <i class="material-icons half {{if eq .AvgRating 4.5}}active{{end}}">star</i>
                <i class="material-icons whole {{if eq .AvgRating 4.0}}active{{end}}">star</i>
                <i class="material-icons half {{if eq .AvgRating 3.5}}active{{end}}">star</i>
                <i class="material-icons whole {{if eq .AvgRating 3.0}}active{{end}}">star</i>
                <i class="material-icons half {{if eq .AvgRating 2.5}}active{{end}}">star</i>
                <i class="material-icons whole {{if eq .AvgRating 2.0}}active{{end}}">star</i>
                <i class="material-icons half {{if eq .AvgRating 1.5}}active{{end}}">star</i>
                <i class="material-icons whole {{if eq .AvgRating 1.0}}active{{end}}">star</i>
                <i class="material-icons half {{if eq .AvgRating 0.5}}active{{end}}">star</i>
                </section>
                <section class="card-content">
                    <span class="card-title">{{.Name}}</span>
                </section>
            </article>
        </div>
        {{end}}
    </div>
    <div id="compact-view" class="hide">
        {{range .Recipes}}
        <div class="col s12 m6 l4">
            <div class="collection z-depth-1 hoverable">
                <article class="collection-item avatar grey lighten-4 clickable" onclick="location.href = '{{RootUrlPath}}/recipes/{{.ID}}';">
                    <section class="rating-container">
                <i class="material-icons whole {{if eq .AvgRating 5.0}}active{{end}}">star</i>
                <i class="material-icons half {{if eq .AvgRating 4.5}}active{{end}}">star</i>
                <i class="material-icons whole {{if eq .AvgRating 4.0}}active{{end}}">star</i>
                <i class="material-icons half {{if eq .AvgRating 3.5}}active{{end}}">star</i>
                <i class="material-icons whole {{if eq .AvgRating 3.0}}active{{end}}">star</i>
                <i class="material-icons half {{if eq .AvgRating 2.5}}active{{end}}">star</i>
                <i class="material-icons whole {{if eq .AvgRating 2.0}}active{{end}}">star</i>
                <i class="material-icons half {{if eq .AvgRating 1.5}}active{{end}}">star</i>
                <i class="material-icons whole {{if eq .AvgRating 1.0}}active{{end}}">star</i>
                <i class="material-icons half {{if eq .AvgRating 0.5}}active{{end}}">star</i>
                    </section>
                    <section class="section">
                        <img src="{{RootUrlPath}}{{.Image}}" class="circle">
                        <span class="title">{{.Name}}</span>
                    </section>
                </article>
            </div>
        </div>
        {{end}}
    </div>
    
    {{$baseLink := .PerPage | printf "?q=%s&count=%d&page=" .Query}}
    <ul class="pagination col s12 l12 center">
        <li class="{{if le .PageNum 1}}disabled{{end}}">
            <a href="{{if gt .PageNum 1}}{{$baseLink}}1{{else}}#{{end}}"><i class="material-icons">first_page</i></a>
        </li>
        <li class="{{if le .PageNum 1}}disabled{{end}}">
            <a href="{{if gt .PageNum 1}}{{$baseLink}}{{Add .PageNum -1}}{{else}}#{{end}}"><i class="material-icons">chevron_left</i></a>
        </li>
        {{range  Paginate .PageNum .NumPages 5}}
        <li {{if eq $.PageNum .}}class="active"{{end}}>
            <a href="{{$baseLink}}{{.}}">{{.}}</a>
        </li>
        {{end}}
        <li class="{{if ge .PageNum .NumPages}}disabled{{end}}">
            <a href="{{if lt .PageNum .NumPages}}{{$baseLink}}{{Add .PageNum 1}}{{else}}#{{end}}"><i class="material-icons">chevron_right</i></a>
        </li>
        <li class="{{if ge .PageNum .NumPages}}disabled{{end}}">
            <a href="{{if lt .PageNum .NumPages}}{{$baseLink}}{{.NumPages}}{{else}}#{{end}}"><i class="material-icons">last_page</i></a>
        </li>
    </ul>
</section>
<section class="fixed-action-btn">
    <a href="{{RootUrlPath}}/recipes/create" class="btn-floating btn-large waves-effect green">
        <i class="material-icons">add</i>
    </a>
</section>
{{ end }}

{{ define "js-recipe/list" }}
<script type="text/javascript">
    $('#full-view-button').click(function() {
        $('#full-view').removeClass('hide')
        $('#full-view-button').removeClass('grey-text').addClass('black-text')
        
        $('#compact-view').addClass('hide')
        $('#compact-view-button').addClass('grey-text').removeClass('black-text')
    });
    $('#compact-view-button').click(function() {
        $('#full-view').addClass('hide')
        $('#full-view-button').addClass('grey-text').removeClass('black-text')
        
        $('#compact-view').removeClass('hide')
        $('#compact-view-button').removeClass('grey-text').addClass('black-text')
    });
</script>
{{ end }}