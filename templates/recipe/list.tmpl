{{ define "content-recipe/list" }}
<section class="row">
    {{if .SearchQuery}}
    <p class="col s12 l12">
        Results for search '{{.SearchQuery}}': {{.ResultCount}}
    </p>
    {{end}}
    {{range .Recipes}}
    <div class="col s12 m6 l4">
        <article class="card small grey lighten-4 hoverable clickable" onclick="location.href = '{{RootUrlPath}}/recipes/{{.ID}}';">
            {{if .Image}}
            <section class="card-image">
                <img src="{{RootUrlPath}}{{.Image}}" class="darken-25">
                <span class="card-title">{{.Name}}</span>
            </section>
            {{end}}
            <section class="card-content">
                {{if not .Image}}
                <span class="card-title">{{.Name}}</span>
                {{end}}
                <p class="plain-text">{{.Description}}</p>
            </section>
        </article>
    </div>
    {{end}}
    
    {{$baseLink := .PerPage | printf "?q=%s&count=%d&page=" .Query}}
    <ul class="pagination col s12 l12 center">
        <li class="{{if eq .PageNum 1}}disabled{{end}}">
            <a href="{{if ne .PageNum 1}}{{$baseLink}}1{{else}}#{{end}}"><i class="material-icons">first_page</i></a>
        </li>
        <li class="{{if eq .PageNum 1}}disabled{{end}}">
            <a href="{{if ne .PageNum 1}}{{$baseLink}}{{Add .PageNum -1}}{{else}}#{{end}}"><i class="material-icons">chevron_left</i></a>
        </li>
        {{$linkPageNum := .PageNum | Add -5}}
        {{if gt $linkPageNum 0}}
        <li class="hide-on-small-only">
            <a href="{{$baseLink}}{{$linkPageNum}}">{{$linkPageNum}}</a>
        </li>
        {{end}}
        {{$linkPageNum := .PageNum | Add -4}}
        {{if gt $linkPageNum 0}}
        <li class="hide-on-small-only">
            <a href="{{$baseLink}}{{$linkPageNum}}">{{$linkPageNum}}</a>
        </li>
        {{end}}
        {{$linkPageNum := .PageNum | Add -3}}
        {{if gt $linkPageNum 0}}
        <li class="hide-on-small-only">
            <a href="{{$baseLink}}{{$linkPageNum}}">{{$linkPageNum}}</a>
        </li>
        {{end}}
        {{$linkPageNum := .PageNum | Add -2}}
        {{if gt $linkPageNum 0}}
        <li>
            <a href="{{$baseLink}}{{$linkPageNum}}">{{$linkPageNum}}</a>
        </li>
        {{end}}
        {{$linkPageNum := .PageNum | Add -1}}
        {{if gt $linkPageNum 0}}
        <li>
            <a href="{{$baseLink}}{{$linkPageNum}}">{{$linkPageNum}}</a>
        </li>
        {{end}}
        <li class="active">
            <a href="{{$baseLink}}{{.PageNum}}">{{.PageNum}}</a>
        </li>
        {{$linkPageNum := .PageNum | Add 1}}
        {{if le $linkPageNum .NumPages}}
        <li>
            <a href="{{$baseLink}}{{$linkPageNum}}">{{$linkPageNum}}</a>
        </li>
        {{end}}
        {{$linkPageNum := .PageNum | Add 2}}
        {{if le $linkPageNum .NumPages}}
        <li>
            <a href="{{$baseLink}}{{$linkPageNum}}">{{$linkPageNum}}</a>
        </li>
        {{end}}
        {{$linkPageNum := .PageNum | Add 3}}
        {{if le $linkPageNum .NumPages}}
        <li class="hide-on-small-only">
            <a href="{{$baseLink}}{{$linkPageNum}}">{{$linkPageNum}}</a>
        </li>
        {{end}}
        {{$linkPageNum := .PageNum | Add 4}}
        {{if le $linkPageNum .NumPages}}
        <li class="hide-on-small-only">
            <a href="{{$baseLink}}{{$linkPageNum}}">{{$linkPageNum}}</a>
        </li>
        {{end}}
        {{$linkPageNum := .PageNum | Add 5}}
        {{if le $linkPageNum .NumPages}}
        <li class="hide-on-small-only">
            <a href="{{$baseLink}}{{$linkPageNum}}">{{$linkPageNum}}</a>
        </li>
        {{end}}
        <li class="{{if eq .PageNum .NumPages}}disabled{{end}}">
            <a href="{{if ne .PageNum .NumPages}}{{$baseLink}}{{Add .PageNum 1}}{{else}}#{{end}}"><i class="material-icons">chevron_right</i></a>
        </li>
        <li class="{{if eq .PageNum .NumPages}}disabled{{end}}">
            <a href="{{if ne .PageNum .NumPages}}{{$baseLink}}{{.NumPages}}{{else}}#{{end}}"><i class="material-icons">last_page</i></a>
        </li>
    </ul>
</section>
<section class="fixed-action-btn">
    <a href="{{RootUrlPath}}/recipes/create" class="btn-floating btn-large waves-effect green">
        <i class="material-icons">add</i>
    </a>
</section>
{{ end }}
