{{template "shared/header" .}}
<section class="container">
    <article class="card grey lighten-4">
        <section class="card-content">
            <a href="/recipes" class="right">
                <i class="material-icons black-text">reply</i>
            </a>
            <h4>{{.Recipe.Name}}</h4>
            <p class="section plain-text">{{.Recipe.Description}}</p>
            <div class="divider"></div>
            <ul>
                {{range .Recipe.Ingredients}}
                <li>
                    <strong>{{.AmountDisplay}}</strong>
                    <span>{{.Unit.Name | ToLower}}</span>
                    <span>{{.Name}}</span>
                </li>
                {{end}}
            </ul>
            <div class="divider"></div>
            <p class="section plain-text">{{.Recipe.Directions}}</p>
            <div class="divider"></div>
            <p class="section">
                {{range .Recipe.Tags}}
                <div class="chip">
                    {{.}}
                </div>
                {{end}}
            </p>
        </section>
    </article>
    <article>
        <ul class="tabs">
            <li class="tab">
                <a href="#images-tab">Images</a>
            </li>
            <li class="tab">
                <a href="#notes-tab">Notes</a>
            </li>
        </ul>
        <section id="images-tab">
            <article class="section center">
            {{range .Images}}
            <a href="{{.URL}}">
                {{if .ThumbnailURL}}
                <img width="250" height="250" src="{{.ThumbnailURL}}">
                {{else}}
                <img width="250" height="250" src="{{.URL}}">
                {{end}}
            </a>
            {{end}}
            </article>
        </section>
        <section id="notes-tab">
            {{range .Notes}}
            <article class="card grey lighten-4">
                <section class="card-content">
                    <p class="section">
                        <i class="material-icons left">comment</i>
                        {{.CreatedAt.Format "2006 Jan 02, 03:04:05PM"}}
                    </p>
                    <div class="divider"></div>
                    <p class="section">{{.Note}}</p>
                </section>
            </article>
            {{end}}
        </section>
    </article>
</section>
<section class="fixed-action-btn">
    <a class="btn-floating btn-large waves-effect blue">
        <i class="material-icons">more_vert</i>
    </a>
    <ul>
        <li>
            <a href="#delete-confirm" class="btn-floating waves-effect red modal-trigger">
                <i class="material-icons">delete</i>
            </a>
        </li>
        <li>
            <a href="/recipes/{{.Recipe.ID}}/edit" class="btn-floating waves-effect amber darken-2">
                <i class="material-icons">mode_edit</i>
            </a>
        </li>
        <li>
            <a href="#add-image-modal" class="btn-floating waves-effect green modal-trigger">
                <i class="material-icons">add_a_photo</i>
            </a>
        </li>
        <li>
            <a href="#add-note-modal" class="btn-floating waves-effect blue modal-trigger">
                <i class="material-icons">insert_comment</i>
            </a>
        </li>
    </ul>
</section>
<div id="delete-confirm" class="modal">
    <div class="modal-content">
        <h5 class="red-text"><i class="material-icons left">warning</i>Delete?</h5>
        <p>Are you sure you want to delete this recipe?</p>
    </div>
    <div class="modal-footer">
        <a href="#" class="modal-action modal-close btn-flat">No</a>
        <a href="/recipes/{{.Recipe.ID}}/delete" class="modal-action modal-close btn-flat">Yes</a>
    </div>
</div>
<div id="add-image-modal" class="modal">
    <form action="/recipes/{{.Recipe.ID}}/attach/create" method="post" enctype="multipart/form-data">
        <div class="modal-content">
            <h5 class="green-text"><i class="material-icons left">add_a_photo</i>Attach Image</h5>
            <p>Browse to an image file to attach to this recipe.<p>
            <div class="input-field file-field">
                <div class="btn">
                    <span>File</span>
                    <input name="file_content" type="file">
                </div>
                <div class="file-path-wrapper">
                    <input name="file_name" class="file-path">
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <a href="#" class="modal-action modal-close btn-flat">Cancel</a>
            <button type="submit" class="modal-action modal-close btn-flat">Attach</button>
        </div>
    </form>
</div>
<div id="add-note-modal" class="modal">
    <form action="/recipes/{{.Recipe.ID}}/note/create" method="post">
        <div class="modal-content">
            <h5 class="blue-text"><i class="material-icons left">insert_comment</i>Add Note</h5>
            <div class="input-field">
                <textarea id="note" name="note" class="materialize-textarea" required></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <a href="#" class="modal-action modal-close btn-flat">Cancel</a>
            <button type="submit" class="modal-action modal-close btn-flat">Add</a>
        </div>
    </form>
</div>
{{template "shared/footer" .}}
