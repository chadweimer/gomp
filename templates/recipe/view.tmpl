{{template "shared/header" .}}
<section class="container">
    <article class="card grey lighten-4">
        <section class="card-content">
            <a href="/recipes" class="right">
                <i class="material-icons black-text">close</i>
            </a>
            <h4>{{.Recipe.Name}}</h4>
            <p class="section plain-text">{{.Recipe.Description}}</p>
            <div class="divider"></div>
            <ul>
                {{range $index, $ingredient := .Recipe.Ingredients}}
                <li>
                    <strong>{{$ingredient.AmountDisplay}}</strong>
                    <span>{{$ingredient.Unit.Name | ToLower}}</span>
                    <span>{{$ingredient.Name}}</span>
                </li>
                {{end}}
            </ul>
            <div class="divider"></div>
            <p class="section plain-text">{{.Recipe.Directions}}</p>
            <div class="divider"></div>
            <p class="section">
                {{range $index, $tag := .Recipe.Tags}}
                <div class="chip">
                    {{$tag}}
                </div>
                {{end}}
            </p>
        </section>
    </article>
</section>
<section class="fixed-action-btn">
    <a class="btn-floating btn-large waves-effect blue">
        <i class="material-icons">more_vert</i>
    </a>
    <ul>
        <li>
            <a href="#delete-confirm" class="btn-floating waves-effect red modal-trigger">
                <i class="material-icons">delete</i>
            </a>
        </li>
        <li>
            <a href="/recipes/{{.Recipe.ID}}/edit" class="btn-floating waves-effect amber darken-2">
                <i class="material-icons">mode_edit</i>
            </a>
        </li>
        <li>
            <a href="#add-image-modal" class="btn-floating waves-effect green modal-trigger">
                <i class="material-icons">add_a_photo</i>
            </a>
        </li>
        <li>
            <a href="#add-note-modal" class="btn-floating waves-effect blue modal-trigger">
                <i class="material-icons">insert_comment</i>
            </a>
        </li>
    </ul>
</section>
<div id="delete-confirm" class="modal">
    <div class="modal-content">
        <h5 class="red-text"><i class="material-icons left">warning</i>Delete?</h5>
        <p>Are you sure you want to delete this recipe?</p>
    </div>
    <div class="modal-footer">
        <a href="#" class="modal-action modal-close btn-flat">No</a>
        <a href="/recipes/{{.Recipe.ID}}/delete" class="modal-action modal-close btn-flat">Yes</a>
    </div>
</div>
<div id="add-image-modal" class="modal">
    <form action="/recipes/{{.Recipe.ID}}/attach" method="post">
        <div class="modal-content">
            <h5 class="green-text"><i class="material-icons left">add_a_photo</i>Attach Image</h5>
            <p>Browse to an image file to attach to this recipe.<p>
            <div class="input-field file-field">
                <div class="btn">
                    <span>File</span>
                    <input name="file_path" type="file">
                </div>
                <div class="file-path-wrapper">
                    <input class="file-path">
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <a href="#" class="modal-action modal-close btn-flat">Cancel</a>
            <button type="submit" class="modal-action modal-close btn-flat">Attach</button>
        </div>
    </form>
</div>
<div id="add-note-modal" class="modal">
    <form action="/recipes/{{.Recipe.ID}}/note" method="post">
        <div class="modal-content">
            <h5 class="blue-text"><i class="material-icons left">insert_comment</i>Add Note</h5>
            <div class="input-field">
                <textarea id="note" name="note" class="materialize-textarea" required></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <a href="#" class="modal-action modal-close btn-flat">Cancel</a>
            <button type="submit" class="modal-action modal-close btn-flat">Add</a>
        </div>
    </form>
</div>
{{template "shared/footer" .}}
